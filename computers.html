<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>השוואת רכיבי מחשב - אז והיום</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 0;
            text-align: center;
            color: #333;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 1px;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2.2rem;
        }
        h2 {
            color: #3498db;
            margin-top: 20px; /* מקטין את המרווח מלמעלה */
    margin-bottom: 15px; /* מוסיף מרווח קטן מלמטה */
            
        }
        /* Wizard Components */
        .wizard-container {
            position: relative;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 20px;
            min-height: 500px; /* מקטין את הגובה המינימלי */
        }
        .wizard-steps {
            display: flex;
            justify-content: center;
            padding: 15px 0;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }
        .wizard-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 15px;
            font-weight: bold;
            color: white;
            position: relative;
        }
        .wizard-step::after {
            content: '';
            position: absolute;
            height: 3px;
            background-color: #e0e0e0;
            top: 50%;
            left: 100%;
            width: 30px;
            transform: translateY(-50%);
        }
        .wizard-step:last-child::after {
            display: none;
        }
        .wizard-step.active {
            background-color: #3498db;
        }
        .wizard-step.completed {
            background-color: #2ecc71;
        }
        .wizard-step.active::after,
        .wizard-step.completed::after {
            background-color: #2ecc71;
        }
        .wizard-content {
            padding: 20px;
            text-align: right;
            overflow-y: auto;
            max-height: calc(100vh - 200px); 
        }
        .wizard-navigation {
            padding: 15px;
            display: flex;
            justify-content: space-between;
            background-color: #f8f9fa;
            border-top: 1px solid #e0e0e0;
            position: sticky;
            bottom: 0;
        }
        .wizard-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .wizard-btn:hover {
            background-color: #2980b9;
        }
        .wizard-btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        /* Original styling from the document */
        .intro {
            margin-bottom: 20px;
            text-align: right;
        }
        .intro p {
            font-size: 1.1rem;
            line-height: 1.6;
        }
        .component-section {
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s;
            margin-bottom: 30px;
        }
        .component-header {
            background-color: #3498db;
            color: white;
            padding: 15px;
            font-size: 1.5rem;
            font-weight: bold;
        }
        .component-content {
            padding: 15px;
        }
        
        /* Game Demo Styles */
        .game-demo-container, .memory-visualization, .browser-demo-container {
    margin-top: 15px; /* מקטין את המרווח מלמעלה */
    text-align: center;
}
        .game-demo-title {
            color: #3498db;
            margin-bottom: 15px;
        }
        .game-windows, .memory-blocks-container, .browser-windows {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
        }
        .game-window {
            border: 2px solid #3498db;
            border-radius: 8px;
            width: 400px;
            max-width: 100%;
            overflow: hidden;
            position: relative;
        }
        .game-window-title {
            background-color: #3498db;
            color: white;
            padding: 5px;
            font-weight: bold;
        }
        .game-canvas {
            width: 100%;
            height: 300px;
            background-color: #000;
        }
        .fps-display {
            position: absolute;
            top: 35px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        .game-controls {
            margin: 20px 0;
        }
        .fps-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .fps-btn:hover {
            background-color: #2980b9;
        }
        .fps-btn.active {
            background-color: #2c3e50;
        }
        
        /* Memory Visualization Styles */
        .memory-visualization {
            margin-top: 20px;
        }
        .memory-blocks-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}
        .memory-block-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        .memory-blocks {
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    justify-content: center;
    max-width: 300px; /* הקטנה מ-450px */
    margin: 0 auto;
}

.memory-cell {
    width: 15px; /* הקטנה מ-20px */
    height: 15px; /* הקטנה מ-20px */
    background-color: #ecf0f1;
    border: 1px solid #bdc3c7;
    transition: background-color 0.3s;
}
        .memory-cell.filled {
            background-color: #3498db;
        }
        .memory-cell.filled-new {
            background-color: #2ecc71;
        }
        .memory-controls {
            margin: 15px 0;
        }
        .memory-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .memory-btn:hover {
            background-color: #2980b9;
        }
        .memory-label {
            display: block;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        .asset-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 5px; /* הקטנת המרווח בין אריחים */
    margin-top: 10px;
    max-width: 400px; /* הגבלת הרוחב המקסימלי */
    margin-left: auto;
    margin-right: auto;
}
        .asset-box {
    width: 80px; /* הקטנה מ-100px ל-80px */
    text-align: center;
    margin-bottom: 8px; /* הוספת מרווח תחתון */
}

.asset-image {
    width: 60px; /* הקטנה מ-80px ל-60px */
    height: 60px; /* הקטנה מ-80px ל-60px */
    margin: 0 auto;
    background-color: #e67e22;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-weight: bold;
    font-size: 0.8rem; /* הקטנת הגופן */
}

.asset-label {
    font-size: 0.75rem; /* הקטנת הגופן */
    margin-top: 3px;
    white-space: nowrap; /* למנוע שבירת שורות */
    overflow: hidden;
    text-overflow: ellipsis; /* הוספת נקודות אם הטקסט ארוך מדי */
}

.memory-info {
    margin-top: 10px; /* הקטנה מ-15px */
    padding: 8px; /* הקטנה מ-10px */
    background-color: #f8f9fa;
    border-radius: 5px;
    font-size: 0.85rem; /* הקטנת הגופן */
    text-align: center;
}
        
        /* Browser Demo Styles */
        .browser-demo-container {
            margin-top: 20px;
        }
        .browser-windows {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        .browser-window {
            border: 2px solid #3498db;
            border-radius: 8px;
            width: 400px;
            max-width: 100%;
            overflow: hidden;
        }
        .browser-title-bar {
            background-color: #3498db;
            color: white;
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .browser-controls {
            display: flex;
        }
        .browser-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 5px;
        }
        .browser-dot.red {
            background-color: #e74c3c;
        }
        .browser-dot.yellow {
            background-color: #f1c40f;
        }
        .browser-dot.green {
            background-color: #2ecc71;
        }
        .browser-address-bar {
            background-color: #ecf0f1;
            padding: 5px;
            display: flex;
            align-items: center;
        }
        .browser-url {
            background-color: white;
            border: 1px solid #bdc3c7;
            border-radius: 3px;
            padding: 5px;
            flex-grow: 1;
            text-align: left;
            direction: ltr;
            font-size: 0.8rem;
        }
        .browser-content {
            height: 300px;
            background-color: white;
            position: relative;
        }
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .loading-text {
            margin-top: 10px;
            color: #7f8c8d;
        }
        .browser-assets {
            display: none;
        }
        .browser-site {
            padding: 15px;
            text-align: left;
        }
        .site-header {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .site-content {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .site-image {
            width: 100px;
            height: 100px;
            background-color: #3498db;
            margin-right: 10px;
            flex-shrink: 0;
        }
        .site-text {
            flex-grow: 1;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        .browser-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            font-size: 1rem;
        }
        .browser-btn:hover {
            background-color: #2980b9;
        }
        .browser-info {
            margin-top: 15px;
            font-size: 0.9rem;
            color: #7f8c8d;
            text-align: center;
        }
        
        .comparison-tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            z-index: 100;
            pointer-events: none;
            display: none;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
        }
        .modal-title {
            font-size: 1.8rem;
            color: #3498db;
            margin-bottom: 20px;
            text-align: center;
        }
        .modal-text {
            font-size: 1.2rem;
            line-height: 1.5;
            margin-bottom: 25px;
            text-align: center;
        }
        .modal-btn {
            display: block;
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 0 auto;
        }
        .modal-btn:hover {
            background-color: #2980b9;
        }
        
        /* Fade in animation */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Hide all sections initially */
        .wizard-step-content {
            display: none;
        }
        .wizard-step-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
    </style>
</head>
<body>
    <body>
        <!-- חלונית וידאו צפה -->

    <div class="container">
        <h1>רכיבי המחשב - אז והיום</h1>
        
        <div class="wizard-container">
            <!-- Wizard Steps Indicator -->
            <div class="wizard-steps">
                <div class="wizard-step active" data-step="1">1</div>
                <div class="wizard-step" data-step="2">2</div>
                <div class="wizard-step" data-step="3">3</div>
                <div class="wizard-step" data-step="4">4</div>
                <div class="wizard-step" data-step="5">5</div>
                <div class="wizard-step" data-step="6">6</div>
            </div>
            <!-- Wizard Content -->
            <div class="wizard-content">
                <!-- Step 1: Intro -->
<!-- Step 1: Intro -->
<div id="step-1" class="wizard-step-content active">
    <div class="intro">
        <h2>חלקי המחשב</h2>
        <!-- סרטון ראשון -->
        <div id="first-video-container" class="video-container" style="margin: 20px auto; max-width: 640px;">
            <video id="main-video" width="100%" controls>
                <source src="iframe/tut1.mp4" type="video/mp4">
                הדפדפן שלך לא תומך בתגית וידאו.
            </video>
        </div>
        
        <!-- סרטון שני (מוסתר בהתחלה) -->
        <div id="second-video-container" class="video-container" style="margin: 20px auto; max-width: 640px; display: none;">
            <h2 style="color: #3498db; text-align: center; font-size: 1.8rem; margin-bottom: 15px;">
                כרטיסי מסך
            </h2>
            <video id="second-video" width="100%" controls>
                <source src="iframe/tut2.mp4" type="video/mp4">
                הדפדפן שלך לא תומך בתגית וידאו.
            </video>
        </div>
    </div>
</div>
                </div>
                
                <!-- Step 2: Graphics Card Section -->
                <div id="step-2" class="wizard-step-content">
                    <div class="component-section">
                        <div class="component-header">כרטיסי מסך - הדגמה</div>
                        <div class="component-content">
                            <!-- Game FPS Demo -->
                            <div class="game-demo-container">
                                <h3 class="game-demo-title">הדגמת משחק: ההבדל בין כרטיסי מסך ישנים וחדשים</h3>
                                <p>כרטיס מסך משפיע על כמה תמונות מוצגות בשנייה . ככל שיש יותר תמונות בשניה, כך המשחק חלק יותר.</p>
                                
                                <div class="game-controls">
                                    <button class="fps-btn active" data-fps="15">כרטיס ישן (15 תמונות בשניה)</button>
                                    <button class="fps-btn" data-fps="30">כרטיס בינוני (30 תמונות בשניה)</button>
                                    <button class="fps-btn" data-fps="60">כרטיס מודרני (60 תמונות בשניה)</button>
                                    <button class="fps-btn" data-fps="144">כרטיס מתקדם (144 תמונות בשניה)</button>
                                </div>
                                
                                <div class="game-windows">
                                    <div class="game-window">
                                        <div class="game-window-title">הדמיית משחק</div>
                                        <div style="width: 400px; height: 300px; background-color: #000; position: relative; overflow: hidden;">
                                            <canvas id="gameCanvas" class="game-canvas" width="400" height="300"></canvas>
                                            <div style="position: absolute; top: 10px; left: 10px; background-color: rgba(0, 0, 0, 0.5); color: white; padding: 5px; border-radius: 3px;">לחץ כדי לקפוץ</div>
                                            <div class="fps-display" id="fpsDisplay">15 FPS</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="comparison-tooltip" id="fpsTooltip"></div>
                                
                                <div style="margin-top: 20px; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
                                    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; max-width: 200px;">
                                        <div style="font-weight: bold; color: #e74c3c;">15 תמונות בשניה (כרטיס ישן)</div>
                                        <div>תנועה מקוטעת עם "קפיצות", קשה מאוד לשחק במשחקים מהירים</div>
                                    </div>
                                    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; max-width: 200px;">
                                        <div style="font-weight: bold; color: #f1c40f;">30 תמונות בשניה (כרטיס בינוני)</div>
                                        <div>תנועה סבירה, מספיק למשחקים איטיים אבל לא למשחקים מהירים</div>
                                    </div>
                                    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px; max-width: 200px;">
                                        <div style="font-weight: bold; color: #2ecc71;">60+ תמונות בשניה (כרטיס מודרני)</div>
                                        <div>תנועה חלקה מאוד, מושלם למשחקים מהירים ותחרותיים</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- שלב הסרטון החדש -->
<div id="step-3" class="wizard-step-content">
    <div class="component-section">
        <div class="component-header">סרטון: זיכרון RAM</div>
        <div class="component-content">
            <div class="video-container" style="margin: 20px auto; max-width: 640px;">
                <video id="ram-video" width="100%" controls>
                    <source src="iframe/tut3.mp4" type="video/mp4">
                    הדפדפן שלך לא תומך בתגית וידאו.
                </video>
            </div>
        </div>
    </div>
</div>
                <!-- Step 3: Memory Section -->
                <div id="step-4" class="wizard-step-content">
                    <div class="component-section">
                        <div class="component-header">זיכרון - הדגמה</div>
                        <div class="component-content">
                            <!-- Memory Visualization Demo -->
                            <div class="memory-visualization">
                                <h3>הדגמה: כמה תוכן יכול המחשב לזכור בבת אחת</h3>
                                <p>הזיכרון במחשב הוא כמו מקום לאחסון דברים שהמחשב משתמש בהם. בואו נראה איך המשחק סוניק תופס מקום במחשב ישן וחדש!</p>
                                
<!-- שינוי לכפתורים -->
<div class="memory-controls">
    <button class="memory-btn" id="loadOldBtn">טען סוניק במחשב משנות ה-90</button>
    <button class="memory-btn" id="loadNewBtn">טען סוניק במחשב משנת 2025</button>
</div>

<!-- שינוי לכותרות -->
<div class="memory-blocks-container">
    <div>
        <div class="memory-block-title">מחשב משנות ה-90 - 8MB RAM</div>
        <div class="memory-blocks" id="oldMemoryBlocks"></div>
        <span class="memory-label">זיכרון פנוי: <span id="oldFreeMemory">8MB</span></span>
        
        <div class="asset-container" id="oldAssets"></div>
        <div class="memory-info" id="oldMemoryInfo">סוניק טרם נטען</div>
    </div>
    
    <div>
        <div class="memory-block-title">מחשב משנת 2025 - 32GB RAM</div>
        <div class="memory-blocks" id="newMemoryBlocks"></div>
        <span class="memory-label">זיכרון פנוי: <span id="newFreeMemory">32GB</span></span>
        
        <div class="asset-container" id="newAssets"></div>
        <div class="memory-info" id="newMemoryInfo">סוניק טרם נטען</div>
    </div>
</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="step-5" class="wizard-step-content">
                    <div class="component-section">
                        <div class="component-header">סרטון: מעבדים</div>
                        <div class="component-content">
                            <div class="video-container" style="margin: 20px auto; max-width: 640px;">
                                <video id="processor-video" width="100%" controls onended="processorVideoWatched = true; nextBtn.style.display = 'block';">
                                    <source src="iframe/tut4.mp4" type="video/mp4">
                                    הדפדפן שלך לא תומך בתגית וידאו.
                                </video>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Step 4: Processor Section -->
                <div id="step-6" class="wizard-step-content">
                    <div class="component-section">
                        <div class="component-header">מעבדים</div>
                        <div class="component-content">

                            <!-- Browser Demo -->
                            <div class="browser-demo-container">
                                <h3>הדגמה: מהירות טעינת דפדפן אינטרנט</h3>
                                <p>המעבד משפיע מאוד על מהירות טעינה של תוכנות ואתרים. בואו נראה את ההבדל בין מעבד ישן למעבד חדש בטעינת דפדפן ואתר אינטרנט!</p>
                                
                                <div class="browser-windows">
                                    <div class="browser-window" id="oldBrowser">
                                        <div class="browser-title-bar">
                                            <div>דפדפן ישן (מעבד 100MHz)</div>
                                            <div class="browser-controls">
                                                <div class="browser-dot red"></div>
                                                <div class="browser-dot yellow"></div>
                                                <div class="browser-dot green"></div>
                                            </div>
                                        </div>
                                        <div class="browser-address-bar">
                                            <div class="browser-url">https://www.example.com</div>
                                        </div>
                                        <div class="browser-content">
                                            <div class="loading-overlay" id="oldLoadingOverlay">
                                                <div class="loading-spinner"></div>
                                                <div class="loading-text">טוען... (<span id="oldLoadingProgress">0</span>%)</div>
                                            </div>
                                            <div class="browser-site" id="oldBrowserSite" style="display: none;">
                                                <div class="site-header">ברוכים הבאים לאתר שלנו</div>
                                                <div class="site-content">
                                                    <div class="site-image"></div>
                                                    <div class="site-text">
                                                        ברוכים הבאים לאתר שלנו. אנחנו שמחים שבחרתם לבקר כאן. האתר שלנו מציע תוכן מעניין ומידע שימושי.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="browser-window" id="newBrowser">
                                        <div class="browser-title-bar">
                                            <div>דפדפן חדש (מעבד 4.5GHz)</div>
                                            <div class="browser-controls">
                                                <div class="browser-dot red"></div>
                                                <div class="browser-dot yellow"></div>
                                                <div class="browser-dot green"></div>
                                            </div>
                                        </div>
                                        <div class="browser-address-bar">
                                            <div class="browser-url">https://www.example.com</div>
                                        </div>
                                        <div class="browser-content">
                                            <div class="loading-overlay" id="newLoadingOverlay">
                                                <div class="loading-spinner"></div>
                                                <div class="loading-text">טוען... (<span id="newLoadingProgress">0</span>%)</div>
                                            </div>
                                            <div class="browser-site" id="newBrowserSite" style="display: none;">
                                                <div class="site-header">ברוכים הבאים לאתר שלנו</div>
                                                <div class="site-content">
                                                    <div class="site-image"></div>
                                                    <div class="site-text">
                                                        ברוכים הבאים לאתר שלנו. אנחנו שמחים שבחרתם לבקר כאן. האתר שלנו מציע תוכן מעניין ומידע שימושי.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="browser-btn" id="loadBrowsersBtn">טען את הדפדפנים</button>
                                
                                <div class="browser-info">
                                    <p>מעבד ישן (100MHz) ייקח בערך <strong>45 שניות</strong> לטעון דפדפן ואתר פשוט.</p>
                                    <p>מעבד חדש (4.5GHz) ייקח בערך <strong>פחות משנייה</strong> לבצע את אותה פעולה!</p>
                                    <p>כדי להמחיש, הדמינו את ההבדל בהדגמה שלנו (בהדגמה הזמן מואץ).</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Wizard Navigation -->
            <div class="wizard-navigation">
                <button id="prev-btn" class="wizard-btn">הקודם</button>
                <button id="next-btn" class="wizard-btn">הבא</button>
            </div>
        </div>
    </div>
    
    <!-- Completion Modal -->
    <div id="completion-modal" class="modal">
        <div class="modal-content">
            <div class="modal-title">סיימתם את הפעילות!</div>
            <div class="modal-text">עכשיו אתם מבינים את ההתפתחות המדהימה של רכיבי המחשב לאורך השנים, ואיך היא משפיעה על החוויה שלנו במשחקים ובשימוש במחשב.</div>
            <button class="modal-btn" id="close-modal-btn">סיום</button>
        </div>
    </div>

    <script>
document.addEventListener("DOMContentLoaded", function () {
  const currentFile = window.location.pathname.split("/").pop();
  const videoContainer = document.getElementById("first-video-container");

  if (currentFile !== "computers.html" && videoContainer) {
    videoContainer.remove(); // מוחק את הוידאו מה־DOM
  }
});


        // Wizard Navigation
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const steps = document.querySelectorAll('.wizard-step-content');
        const stepIndicators = document.querySelectorAll('.wizard-step');
        const modal = document.getElementById('completion-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        let processorVideoWatched = false;
        let currentStep = 1;
        const totalSteps = steps.length;
        // הוסף את הקוד הבא בתחילת קובץ הסקריפט, אחרי ההגדרה של המשתנים prevBtn, nextBtn וכו'
// הוסף משתנה כדי לעקוב אחרי אם הסרטון כבר נצפה
// הוסף משתנה כדי לעקוב אחרי אם הסרטון כבר נצפה
let ramVideoWatched = false;

// עדכן את הפונקציה שמעדכנת את מצב השלבים


// פונקציה להצגת כפתור הפעלה כשיש בעיית autoplay
function showPlayButton(videoElement) {
    const videoContainer = videoElement.parentElement;
    videoContainer.style.position = 'relative';
    
    // בדוק אם כבר יש כפתור הפעלה
    if (videoContainer.querySelector('.play-message')) {
        return;
    }
    
    const playMessage = document.createElement('div');
    playMessage.className = 'play-message';
    playMessage.textContent = 'לחץ כאן להפעלת הסרטון';
    playMessage.style.position = 'absolute';
    playMessage.style.top = '50%';
    playMessage.style.left = '50%';
    playMessage.style.transform = 'translate(-50%, -50%)';
    playMessage.style.background = 'rgba(0,0,0,0.7)';
    playMessage.style.color = 'white';
    playMessage.style.padding = '10px 20px';
    playMessage.style.borderRadius = '5px';
    playMessage.style.cursor = 'pointer';
    playMessage.style.zIndex = '1000';
    
    playMessage.addEventListener('click', () => {
        videoElement.muted = false;
        videoElement.play();
        playMessage.remove();
    });
    
    videoContainer.appendChild(playMessage);
}

// הוסף מאזין לאירוע "סיום" של הסרטון
document.addEventListener('DOMContentLoaded', function() {
    const ramVideo = document.getElementById('ram-video');
    if (ramVideo) {
        ramVideo.addEventListener('ended', function() {
            // כשהסרטון מסתיים, סמן אותו כנצפה והפעל שוב את כפתור "הבא"
            ramVideoWatched = true;
            nextBtn.style.display = 'block';
        });
    }
});
// עדכן את פונקציית goToNextStep
function goToNextStep() {
    // אם אנחנו בשלב 2 (כרטיס מסך) ועוברים לשלב 3 (הסרטון)
    if (currentStep === 2) {
        currentStep++;
        updateSteps();
        updateButtons();
        
        const ramVideo = document.getElementById('ram-video');
        
        // הסתר את כפתור "הבא" עד שהסרטון יסתיים
        if (!ramVideoWatched) {
            nextBtn.style.display = 'none';
            
            // נסה להפעיל את הסרטון אוטומטית
            ramVideo.play().catch(err => {
                console.log('Auto-play prevented:', err);
                // אם יש שגיאת autoplay, הצג הודעה למשתמש
                const videoContainer = ramVideo.parentElement;
                const playMessage = document.createElement('div');
                playMessage.textContent = 'לחץ כאן להפעלת הסרטון';
                playMessage.style.position = 'absolute';
                playMessage.style.top = '50%';
                playMessage.style.left = '50%';
                playMessage.style.transform = 'translate(-50%, -50%)';
                playMessage.style.background = 'rgba(0,0,0,0.7)';
                playMessage.style.color = 'white';
                playMessage.style.padding = '10px 20px';
                playMessage.style.borderRadius = '5px';
                playMessage.style.cursor = 'pointer';
                playMessage.style.zIndex = '1000';
                
                playMessage.addEventListener('click', () => {
                    ramVideo.muted = false;
                    ramVideo.play();
                    playMessage.remove();
                });
                
                videoContainer.style.position = 'relative';
                videoContainer.appendChild(playMessage);
            });
        }
        return;
    }
    
    // אם אנחנו בשלב 3 (סרטון) ומנסים להתקדם לשלב 4 (RAM)
    if (currentStep === 3) {
        // בדוק אם הסרטון נצפה לפני שמתקדמים
        if (!ramVideoWatched) {
            // אם לא, הצג הודעה
            alert('יש לצפות בסרטון עד סופו לפני שממשיכים');
            return;
        }
    }
    if (currentStep === 5) {
    // בדוק אם הסרטון נצפה לפני שמתקדמים
    if (!processorVideoWatched) {
        alert('יש לצפות בסרטון עד סופו לפני שממשיכים');
        return;
    }
    // אם כן, התקדם לשלב הבא
    currentStep++;
    updateSteps();
    updateButtons();
    return;
}
    // המשך כרגיל
    if (currentStep < totalSteps) {
        currentStep++;
        updateSteps();
        updateButtons();
    } else {
        // Show completion modal on final step
        showModal();
    }
}

// תוסיף גם עדכון לפונקציית updateButtons
function updateButtons() {
    prevBtn.disabled = currentStep === 1;
    
    // הסתר את כפתור "הבא" בשלב הסרטון אם הסרטון לא נצפה
    if ((currentStep === 3 && !ramVideoWatched) || 
    (currentStep === 5 && !processorVideoWatched)) {
    nextBtn.style.display = 'none';
} else {
        nextBtn.style.display = 'block';
    }
    
    if (currentStep === totalSteps) {
        nextBtn.textContent = 'סיום';
    } else {
        nextBtn.textContent = 'הבא';
    }
}
const ramVideo = document.getElementById('ram-video');

// בפונקציה goToNextStep, הוסף את הבדיקה הבאה:

// מאזיני אירועים לסרטונים וכפתורים
// מאזיני אירועים לסרטונים וכפתורים
// מאזיני אירועים לסרטונים וכפתורים
document.addEventListener('DOMContentLoaded', function() {
    const firstVideo = document.getElementById('main-video');
    const nextBtnOriginal = document.getElementById('next-btn');
    const welcomeTitle = document.querySelector('.intro h2'); // השגת הכותרת "ברוכים הבאים"
    
    // יצירת התקן לסרטון השני
    const introDiv = document.querySelector('.intro');
    const firstVideoContainer = firstVideo.parentElement;
    
    // בדיקה אם הסרטון השני כבר קיים
    let secondVideoContainer = document.getElementById('second-video-container');
    let secondVideo;

    // אם הסרטון השני עדיין לא קיים, יצירתו
    if (!secondVideoContainer) {
        // יצירת מיכל לסרטון השני
        secondVideoContainer = document.createElement('div');
        secondVideoContainer.id = 'second-video-container';
        secondVideoContainer.className = 'video-container';
        secondVideoContainer.style.margin = '20px auto';
        secondVideoContainer.style.maxWidth = '640px';
        secondVideoContainer.style.display = 'none';
        
        // כותרת לסרטון השני
        const title = document.createElement('h2');
        title.style.color = '#3498db';
        title.style.textAlign = 'center';
        title.style.fontSize = '1.8rem';
        title.style.marginBottom = '15px';
        title.textContent = 'מבוא לרכיבי המחשב';
        
        // יצירת אלמנט וידאו
        secondVideo = document.createElement('video');
        secondVideo.id = 'second-video';
        secondVideo.width = '100%';
        secondVideo.controls = true;
        
        // הוספת מקור הסרטון
        const source = document.createElement('source');
        source.src = 'iframe/tut2.mp4';
        source.type = 'video/mp4';
        
        // חיבור האלמנטים
        secondVideo.appendChild(source);
        secondVideoContainer.appendChild(title);
        secondVideoContainer.appendChild(secondVideo);
        
        // הוספה אחרי הסרטון הראשון
        firstVideoContainer.after(secondVideoContainer);
    } else {
        secondVideo = document.getElementById('second-video');
    }
    
    // הסתרת כפתור "הבא" בהתחלה
    nextBtnOriginal.style.display = 'none';
    
    // הפעל את הסרטון הראשון אוטומטית אחרי 2 שניות

    
    // כאשר הסרטון הראשון מסתיים, הצג את כפתור "הבא"
    firstVideo.addEventListener('ended', function() {
        nextBtnOriginal.style.display = 'block';
    });
    
    // משתנה לסימון אם הסרטון השני כבר הוצג
    let secondVideoShown = false;
    // משתנה לסימון אם הסרטון השני הסתיים
    let secondVideoEnded = false;
    
    // הסר את המאזין המקורי של כפתור "הבא" והוסף מאזין חדש
    nextBtnOriginal.removeEventListener('click', goToNextStep);
    nextBtnOriginal.addEventListener('click', function(e) {
        e.preventDefault(); // מניעת התנהגות ברירת מחדל
        
        // הסתרת הכותרת "ברוכים הבאים" בלחיצה על "הבא"
        if (welcomeTitle) {
            welcomeTitle.style.display = 'none';
        }
        
        // אם אנחנו בשלב 1, הסרטון השני עדיין לא הוצג, והסרטון השני לא הסתיים
        if (currentStep === 1 && !secondVideoShown && !secondVideoEnded) {
            // הסתר את הסרטון הראשון
            firstVideoContainer.style.display = 'none';
            
            // הצג את הסרטון השני
            secondVideoContainer.style.display = 'block';
            
            // נסה להפעיל את הסרטון השני
            secondVideo.play().catch(err => {
                console.log('Auto-play prevented:', err);
            });
            
            // הסרטון השני הוצג
            secondVideoShown = true;
            
            // הסתר את כפתור "הבא" עד שהסרטון השני יסתיים
            nextBtnOriginal.style.display = 'none';
            
            // כאשר הסרטון השני מסתיים, נציג שוב את כפתור "הבא"
// כאשר הסרטון השני מסתיים, עבור לשלב 2
secondVideo.addEventListener('ended', function() {
    nextBtn.style.display = 'block';
    
    // שימוש בגישה ישירה כדי לעבור לשלב 2 במקום דרך goToNextStep
    currentStep++;
    updateSteps();
    updateButtons();
    comingFromSecondVideo = true;
}, { once: true }); // האזנה חד פעמית
            
            return; // יציאה מהפונקציה
        } else {
            // אם כבר הצגנו את הסרטון השני או הסרטון השני הסתיים או אנחנו בשלב אחר,
            // נעבור לשלב הבא
            if (currentStep < totalSteps) {
                currentStep++;
                updateSteps();
                updateButtons();
            } else {
                // Show completion modal on final step
                showModal();
            }
        }
    });
    
    // כאשר הסרטון השני מסתיים, מאפשר ללחוץ על "הבא" כדי לעבור לשלב 2
    secondVideo.addEventListener('ended', function() {
        nextBtnOriginal.style.display = 'block';
        secondVideoEnded = true; // סימון שהסרטון השני הסתיים
    });
});
        // Initialize
        updateButtons();
        
        // Event listeners for navigation
        prevBtn.addEventListener('click', goToPrevStep);
        nextBtn.addEventListener('click', goToNextStep);
        closeModalBtn.addEventListener('click', closeModal);
        
        function goToNextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                updateSteps();
                updateButtons();
            } else {
                // Show completion modal on final step
                showModal();
            }
        }
        
        function goToPrevStep() {
    if (currentStep > 1) {
        currentStep--;
        updateSteps();
        updateButtons();
    }
}
function updateSteps() {
    // Hide all steps
    steps.forEach(step => {
        step.classList.remove('active');
    });
    
    // Show current step
    document.getElementById(`step-${currentStep}`).classList.add('active');
    
    // אם הגענו לשלב הסרטון ה-RAM, הפעל אותו אוטומטית
    if (currentStep === 3) {
        const ramVideo = document.getElementById('ram-video');
        if (ramVideo && !ramVideoWatched) {
            // הסתר את כפתור "הבא"
            nextBtn.style.display = 'none';
            
            // נסה להפעיל אוטומטית
            ramVideo.currentTime = 0;
            ramVideo.muted = true;
            ramVideo.play()
                .then(() => {
                    // הפעלה הצליחה, בטל השתקה אחרי חצי שנייה
                    setTimeout(() => {
                        ramVideo.muted = false;
                    }, 500);
                })
                .catch(err => {
                    console.log('RAM video autoplay prevented:', err);
                    showPlayButton(ramVideo);
                });
        }
    }
    // אם הגענו לשלב הסרטון של המעבדים, הפעל אותו אוטומטית
if (currentStep === 5) {
    const processorVideo = document.getElementById('processor-video');
    if (processorVideo && !processorVideoWatched) {
        // הסתר את כפתור "הבא"
        nextBtn.style.display = 'none';
        
        // נסה להפעיל אוטומטית
        processorVideo.currentTime = 0;
        processorVideo.muted = true;
        processorVideo.play()
            .then(() => {
                // הפעלה הצליחה, בטל השתקה אחרי חצי שנייה
                setTimeout(() => {
                    processorVideo.muted = false;
                }, 500);
            })
            .catch(err => {
                console.log('Processor video autoplay prevented:', err);
                showPlayButton(processorVideo);
            });
    }
}
    // Update step indicators
    stepIndicators.forEach((indicator, index) => {
        const stepNum = index + 1;
        indicator.classList.remove('active', 'completed');
        
        if (stepNum === currentStep) {
            indicator.classList.add('active');
        } else if (stepNum < currentStep) {
            indicator.classList.add('completed');
        }
    });
}
        
        function updateButtons() {
            prevBtn.disabled = currentStep === 1;
            
            if (currentStep === totalSteps) {
                nextBtn.textContent = 'סיום';
            } else {
                nextBtn.textContent = 'הבא';
            }
        }
        
        function showModal() {
            modal.style.display = 'flex';
        }
        
        function closeModal() {
    modal.style.display = 'none';
    
    // יצירת מיכל לסרטון (80% מהמסך)
    const videoContainer = document.createElement('div');
    videoContainer.style.position = 'fixed';
    videoContainer.style.top = '50%';
    videoContainer.style.left = '50%';
    videoContainer.style.transform = 'translate(-50%, -50%)';
    videoContainer.style.width = '80%';
    videoContainer.style.height = '80%';
    videoContainer.style.backgroundColor = 'black';
    videoContainer.style.zIndex = '10000';
    videoContainer.style.boxShadow = '0 0 30px rgba(0,0,0,0.7)';
    videoContainer.style.borderRadius = '10px';
    videoContainer.style.overflow = 'hidden';
    
    // יצירת אלמנט וידאו
    const fullscreenVideo = document.createElement('video');
    fullscreenVideo.src = 'iframe/end.mp4';
    fullscreenVideo.style.width = '100%';
    fullscreenVideo.style.height = '100%';
    fullscreenVideo.style.objectFit = 'contain';
    
    // הוספת מאזין לסיום הסרטון
    fullscreenVideo.addEventListener('ended', function() {
        // מעבר לדף end.html בסיום הסרטון
        window.location.href = 'end.html';
    });
    
    // הוספת הסרטון למיכל
    videoContainer.appendChild(fullscreenVideo);
    
    // הוספת המיכל לגוף הדף
    document.body.appendChild(videoContainer);
    
    // הפעלה אוטומטית של הסרטון
    fullscreenVideo.muted = true; // השתקה זמנית כדי לאפשר autoplay
    
    fullscreenVideo.play()
        .then(() => {
            // ביטול ההשתקה אחרי חצי שניה
            setTimeout(() => {
                fullscreenVideo.muted = false;
            }, 500);
        })
        .catch(error => {
            console.error('שגיאה בהפעלת הסרטון:', error);
            
            // אם לא ניתן להפעיל אוטומטית, הצג כפתור הפעלה
            const playButton = document.createElement('div');
            playButton.textContent = 'לחץ כאן להפעלת הסרטון';
            playButton.style.position = 'absolute';
            playButton.style.top = '50%';
            playButton.style.left = '50%';
            playButton.style.transform = 'translate(-50%, -50%)';
            playButton.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
            playButton.style.color = 'white';
            playButton.style.padding = '20px 40px';
            playButton.style.borderRadius = '10px';
            playButton.style.cursor = 'pointer';
            playButton.style.fontSize = '24px';
            playButton.style.zIndex = '10001';
            
            playButton.addEventListener('click', function() {
                fullscreenVideo.muted = false;
                fullscreenVideo.play();
                playButton.remove();
            });
            
            videoContainer.appendChild(playButton);
        });
    
    // כפי שהיה קודם - שליחת הודעה לעמוד האב

}
        
        // Game demo (FPS simulation)
        const gameCanvas = document.getElementById('gameCanvas');
        const gameCtx = gameCanvas.getContext('2d');
        const fpsDisplay = document.getElementById('fpsDisplay');
        const fpsButtons = document.querySelectorAll('.fps-btn');
        const fpsTooltip = document.getElementById('fpsTooltip');
        
        let currentFPS = 15; // Default
        let lastFrameTime = 0;
        let fpsInterval = 1000 / currentFPS;
        
        // Game elements
        const background = {
            color: '#87CEEB'
        };
        
        const ground = {
            color: '#8B4513',
            y: gameCanvas.height * 0.8,
            height: gameCanvas.height * 0.2
        };
        
        const player = {
            x: 50,
            y: ground.y - 40,
            width: 30,
            height: 40,
            color: '#E74C3C',
            speedX: 3,
            jumping: false,
            jumpPower: 10,
            gravity: 0.5,
            velocityY: 0
        };
        
        const obstacles = [
            { x: 300, y: ground.y - 30, width: 20, height: 30, color: '#3498DB' },
            { x: 500, y: ground.y - 25, width: 25, height: 25, color: '#2ECC71' },
            { x: 700, y: ground.y - 35, width: 30, height: 35, color: '#F1C40F' },
            { x: 900, y: ground.y - 20, width: 20, height: 20, color: '#9B59B6' }
        ];
        
        // Set FPS based on button click
        fpsButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                fpsButtons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                currentFPS = parseInt(this.dataset.fps);
                fpsInterval = 1000 / currentFPS;
                fpsDisplay.textContent = `${currentFPS} FPS`;
            });
        });
        
        // Jump function
        gameCanvas.addEventListener('click', function() {
            if (!player.jumping) {
                player.velocityY = -player.jumpPower;
                player.jumping = true;
            }
        });
        
        // Show tooltip when hovering over the FPS display
        fpsDisplay.addEventListener('mouseover', function(e) {
            fpsTooltip.style.display = 'block';
            fpsTooltip.style.left = `${e.pageX + 10}px`;
            fpsTooltip.style.top = `${e.pageY + 10}px`;
            
            let tooltipText = '';
            if (currentFPS <= 15) {
                tooltipText = 'משחק לא חלק, קשה לשחק';
            } else if (currentFPS <= 30) {
                tooltipText = 'משחק בסיסי, חוויה סבירה';
            } else if (currentFPS <= 60) {
                tooltipText = 'משחק חלק, חוויה טובה';
            } else {
                tooltipText = 'משחק חלק מאוד, חוויה מצוינת למשחקי תחרות';
            }
            
            fpsTooltip.textContent = tooltipText;
        });
        
        fpsDisplay.addEventListener('mouseout', function() {
            fpsTooltip.style.display = 'none';
        });
        
        function drawGame(timestamp) {
            // Throttle the frame rate
            if (!timestamp) timestamp = 0;
            if (timestamp - lastFrameTime < fpsInterval) {
                requestAnimationFrame(drawGame);
                return;
            }
            
            lastFrameTime = timestamp;
            
            // Clear canvas
            gameCtx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            // Draw background
            gameCtx.fillStyle = background.color;
            gameCtx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            // Draw ground
            gameCtx.fillStyle = ground.color;
            gameCtx.fillRect(0, ground.y, gameCanvas.width, ground.height);
            
            // Update player
            if (player.jumping) {
                player.velocityY += player.gravity;
                player.y += player.velocityY;
                
                if (player.y >= ground.y - player.height) {
                    player.y = ground.y - player.height;
                    player.jumping = false;
                    player.velocityY = 0;
                }
            }
            
            // Draw player
            gameCtx.fillStyle = player.color;
            gameCtx.fillRect(player.x, player.y, player.width, player.height);
            
            // Update and draw obstacles
            obstacles.forEach(obstacle => {
                obstacle.x -= player.speedX;
                
                // Reset obstacle position if it goes off-screen
                if (obstacle.x < -obstacle.width) {
                    obstacle.x = gameCanvas.width + Math.random() * 200;
                }
                
                gameCtx.fillStyle = obstacle.color;
                gameCtx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });
            
            // Simple clouds for aesthetics
            gameCtx.fillStyle = 'white';
            gameCtx.beginPath();
            gameCtx.arc(100, 50, 20, 0, Math.PI * 2);
            gameCtx.arc(130, 40, 25, 0, Math.PI * 2);
            gameCtx.arc(160, 50, 15, 0, Math.PI * 2);
            gameCtx.fill();
            
            gameCtx.beginPath();
            gameCtx.arc(300, 70, 20, 0, Math.PI * 2);
            gameCtx.arc(330, 60, 25, 0, Math.PI * 2);
            gameCtx.arc(360, 70, 15, 0, Math.PI * 2);
            gameCtx.fill();
            
            requestAnimationFrame(drawGame);
        }
        
        // Memory demo
        const oldMemoryBlocks = document.getElementById('oldMemoryBlocks');
        const newMemoryBlocks = document.getElementById('newMemoryBlocks');
        const oldFreeMemory = document.getElementById('oldFreeMemory');
        const newFreeMemory = document.getElementById('newFreeMemory');
        const oldAssets = document.getElementById('oldAssets');
        const newAssets = document.getElementById('newAssets');
        const oldMemoryInfo = document.getElementById('oldMemoryInfo');
        const newMemoryInfo = document.getElementById('newMemoryInfo');
        const loadOldBtn = document.getElementById('loadOldBtn');
        const loadNewBtn = document.getElementById('loadNewBtn');
        
        // Create memory blocks visualization
        function createMemoryBlocks(container, count) {
            container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const cell = document.createElement('div');
                cell.className = 'memory-cell';
                container.appendChild(cell);
            }
        }
        
        // Create memory blocks
        createMemoryBlocks(oldMemoryBlocks, 100); // 8MB
        createMemoryBlocks(newMemoryBlocks, 100); // 16GB
        
        // Game assets data (sizes are representative)
        const gameAssets = [
            { name: 'משחק בסיס', size: 2, newSize: 4, color: '#3498DB' },
            { name: 'טקסטורות', size: 3, newSize: 50, color: '#2ECC71' },
            { name: 'מודלים 3D', size: 2, newSize: 30, color: '#E74C3C' },
            { name: 'צלילים', size: 0.5, newSize: 10, color: '#F1C40F' },
            { name: 'עולם משחק', size: 0.5, newSize: 20, color: '#9B59B6' }
        ];
        
        loadOldBtn.addEventListener('click', function() {
            loadOldMemory();
        });
        
        loadNewBtn.addEventListener('click', function() {
            loadNewMemory();
        });
        
// שינוי תוכן סעיף הזכרון - מחליף את הקוד הקיים
function loadOldMemory() {
    // Reset
    const memCells = oldMemoryBlocks.querySelectorAll('.memory-cell');
    memCells.forEach(cell => cell.className = 'memory-cell');
    oldAssets.innerHTML = '';
    
    let totalSize = 0;
    let usedCells = 0;
    oldMemoryInfo.textContent = 'טוען את סוניק במחשב משנות ה-90...';
    
    // Simulate loading each asset
    const loadAssets = (index) => {
        if (index >= sonicAssets.length) {
            oldMemoryInfo.textContent = `סוניק תופס את רוב הזיכרון במחשב משנות ה-90! רק ${(8 - totalSize).toFixed(1)}MB נותרו למערכת ההפעלה.`;
            oldFreeMemory.textContent = `${(8 - totalSize).toFixed(1)}MB`;
            return;
        }
        
        const asset = sonicAssets[index];
        
        if (totalSize + asset.size <= 8) { // 8MB total
            // Create asset visual
            const assetElement = document.createElement('div');
            assetElement.className = 'asset-box';
            
            const assetVisual = document.createElement('div');
            assetVisual.className = 'asset-image';
            assetVisual.style.backgroundColor = asset.color;
            assetVisual.textContent = `${asset.size}MB`;
            
            const assetLabel = document.createElement('div');
            assetLabel.className = 'asset-label';
            assetLabel.textContent = asset.name;
            
            assetElement.appendChild(assetVisual);
            assetElement.appendChild(assetLabel);
            oldAssets.appendChild(assetElement);
            
            // Fill memory cells - show that Sonic takes almost all memory
            const cellsToFill = Math.round((asset.size / 8) * 100);
            for (let i = usedCells; i < usedCells + cellsToFill && i < memCells.length; i++) {
                memCells[i].classList.add('filled');
            }
            
            usedCells += cellsToFill;
            totalSize += asset.size;
        }
        
        setTimeout(() => loadAssets(index + 1), 500);
    };
    
    loadAssets(0);
}

function loadNewMemory() {
    // Reset
    const memCells = newMemoryBlocks.querySelectorAll('.memory-cell');
    memCells.forEach(cell => cell.className = 'memory-cell');
    newAssets.innerHTML = '';
    
    let totalSize = 0;
    let usedCells = 0;
    newMemoryInfo.textContent = 'טוען את סוניק במחשב משנת 2025...';
    
    // Simulate loading each asset
    const loadAssets = (index) => {
        if (index >= sonicAssets.length) {
            newMemoryInfo.textContent = `סוניק תופס רק ${totalSize}GB מתוך 32GB! המחשב המודרני יכול להריץ עוד הרבה משחקים ויישומים במקביל.`;
            newFreeMemory.textContent = `${(32 - totalSize).toFixed(1)}GB`;
            return;
        }
        
        const asset = sonicAssets[index];
        
        if (totalSize + asset.newSize <= 32) { // 32GB total RAM
            // Create asset visual
            const assetElement = document.createElement('div');
            assetElement.className = 'asset-box';
            
            const assetVisual = document.createElement('div');
            assetVisual.className = 'asset-image';
            assetVisual.style.backgroundColor = asset.color;
            assetVisual.textContent = `${asset.newSize}GB`;
            
            const assetLabel = document.createElement('div');
            assetLabel.className = 'asset-label';
            assetLabel.textContent = asset.name;
            
            assetElement.appendChild(assetVisual);
            assetElement.appendChild(assetLabel);
            newAssets.appendChild(assetElement);
            
            // Show Sonic using only a small part of memory
            const cellsToFill = Math.round((asset.newSize / 32) * 100);
            for (let i = usedCells; i < usedCells + cellsToFill && i < memCells.length; i++) {
                memCells[i].classList.add('filled-new');
            }
            
            usedCells += cellsToFill;
            totalSize += asset.newSize;
        }
        
        setTimeout(() => loadAssets(index + 1), 500);
    };
    
    loadAssets(0);
}

// נתוני המשחק סוניק - נכון להחליף את gameAssets המקורי
// נתוני המשחק סוניק - קיצור השמות
const sonicAssets = [
    { name: 'קבצי בסיס', size: 1.5, newSize: 0.5, color: '#2C3E50' },
    { name: 'דמויות', size: 2.0, newSize: 1.0, color: '#3498DB' },
    { name: 'שלבים', size: 3.0, newSize: 1.2, color: '#2ECC71' },
    { name: 'צלילים', size: 0.8, newSize: 0.3, color: '#F1C40F' },
    { name: 'אפקטים', size: 0.7, newSize: 0.5, color: '#E74C3C' }
];
        
        // Browser demo
        const loadBrowsersBtn = document.getElementById('loadBrowsersBtn');
        const oldLoadingOverlay = document.getElementById('oldLoadingOverlay');
        const newLoadingOverlay = document.getElementById('newLoadingOverlay');
        const oldBrowserSite = document.getElementById('oldBrowserSite');
        const newBrowserSite = document.getElementById('newBrowserSite');
        const oldLoadingProgress = document.getElementById('oldLoadingProgress');
        const newLoadingProgress = document.getElementById('newLoadingProgress');
        
        loadBrowsersBtn.addEventListener('click', function() {
            // Reset
            oldLoadingOverlay.style.display = 'flex';
            newLoadingOverlay.style.display = 'flex';
            oldBrowserSite.style.display = 'none';
            newBrowserSite.style.display = 'none';
            oldLoadingProgress.textContent = '0';
            newLoadingProgress.textContent = '0';
            this.disabled = true;
            
            // Simulate old browser loading (slow)
            let oldProgress = 0;
            const oldInterval = setInterval(() => {
                oldProgress += 1;
                oldLoadingProgress.textContent = oldProgress;
                
                if (oldProgress >= 100) {
                    clearInterval(oldInterval);
                    oldLoadingOverlay.style.display = 'none';
                    oldBrowserSite.style.display = 'block';
                }
            }, 200); // 20 seconds to load (100 * 200ms)
            
            // Simulate new browser loading (fast)
            let newProgress = 0;
            const newInterval = setInterval(() => {
                newProgress += 10;
                newLoadingProgress.textContent = newProgress;
                
                if (newProgress >= 100) {
                    clearInterval(newInterval);
                    newLoadingOverlay.style.display = 'none';
                    newBrowserSite.style.display = 'block';
                }
            }, 50); // 0.5 seconds to load (10 * 50ms)
            
            // Re-enable button after both browsers finish loading
            setTimeout(() => {
                this.disabled = false;
            }, 20000);
        });
        
        // האזנה להודעות מעמוד האב
        window.addEventListener('message', function(event) {
            if (event.data === 'closeModal') {
                closeModal();
            }
        });
        
        // Initialize the game animation
        window.addEventListener('load', function() {
            // First render to ensure game canvas is visible
            const initialDraw = () => {
                gameCtx.fillStyle = background.color;
                gameCtx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
                
                gameCtx.fillStyle = ground.color;
                gameCtx.fillRect(0, ground.y, gameCanvas.width, ground.height);
                
                gameCtx.fillStyle = player.color;
                gameCtx.fillRect(player.x, player.y, player.width, player.height);
                
                obstacles.forEach(obstacle => {
                    gameCtx.fillStyle = obstacle.color;
                    gameCtx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                });
            };
            
            initialDraw();
            
            // Start the animation loop
            drawGame();
// החלף את הקוד הקיים שמפעיל את הסרטון עם זה
const videoElement = document.getElementById('main-video');
if (videoElement) {
    // צריך כפתור הפעלה ידני
    let needManualPlay = false;
    
    // בדוק את ה-referrer
    // אם אנחנו נטענים ישירות (ללא referrer), או מדף אחר שאינו עמוד האב,
    // נפעיל את הסרטון אוטומטית
    if (document.referrer === '') {
        // נסה להפעיל את הסרטון
        videoElement.muted = true; // מנוטרל כדי לעקוף את מדיניות האוטופליי של הדפדפן
        
        videoElement.play()
            .then(() => {
                // בהצלחה: בטל את ההשתקה אחרי שניה
                setTimeout(() => {
                    videoElement.muted = false;
                }, 1000);
            })
            .catch(error => {
                console.log('Auto-play was prevented:', error);
                needManualPlay = true;
            });
    } else {
        needManualPlay = true;
    }
    
    // הוסף כפתור הפעלה ידני אם צריך
    if (needManualPlay) {
        const videoContainer = videoElement.parentElement;
        videoContainer.style.position = 'relative';
        
        const playMessage = document.createElement('div');
        playMessage.textContent = 'לחץ כאן להפעלת הסרטון';
        playMessage.style.position = 'absolute';
        playMessage.style.top = '50%';
        playMessage.style.left = '50%';
        playMessage.style.transform = 'translate(-50%, -50%)';
        playMessage.style.background = 'rgba(0,0,0,0.7)';
        playMessage.style.color = 'white';
        playMessage.style.padding = '10px 20px';
        playMessage.style.borderRadius = '5px';
        playMessage.style.cursor = 'pointer';
        playMessage.style.zIndex = '1000';
        
        playMessage.addEventListener('click', () => {
            videoElement.muted = false;
            videoElement.play();
            playMessage.remove();
        });
        
        videoContainer.appendChild(playMessage);
    }
}
        });
        // התנהגות חלונית הווידאו הצפה


// פונקציה להפיכת חלונית הוידאו לניתנת לגרירה
// טיפול בסרטונים והתנהגות כפתורים
document.addEventListener('DOMContentLoaded', function() {
    const firstVideo = document.getElementById('main-video');
    const nextBtn = document.getElementById('next-btn');
    const secondVideoContainer = document.getElementById('second-video-container');
    const secondVideo = document.getElementById('second-video');
    
    // הסתרת כפתור "הבא" בהתחלה
    nextBtn.style.display = 'none';
    
    // הפעל את הסרטון הראשון אוטומטית אחרי 2 שניות

    
    // כאשר הסרטון הראשון מסתיים, הצג את כפתור "הבא"
    firstVideo.addEventListener('ended', function() {
        nextBtn.style.display = 'block';
    });
    
    // שמירת המימוש המקורי של goToNextStep
    const originalGoToNextStep = goToNextStep;
    
    // דריסת הפונקציה המקורית
    window.goToNextStep = function() {
        // אם אנחנו בשלב 1, נציג את הסרטון השני
        if (currentStep === 1) {
            // הסתר את הסרטון הראשון
            firstVideo.parentElement.style.display = 'none';
            
            // הצג את הסרטון השני
            secondVideoContainer.style.display = 'block';
            
            // נסה להפעיל את הסרטון השני
            secondVideo.play().catch(err => {
                console.log('Auto-play prevented:', err);
            });
            
            // הסתר את כפתור "הבא" עד שהסרטון השני יסתיים
            nextBtn.style.display = 'none';
            
            // כאשר הסרטון השני מסתיים, עבור לשלב 2
            secondVideo.addEventListener('ended', function() {
                nextBtn.style.display = 'block';
                // קריאה לפונקציה המקורית
                originalGoToNextStep();
            }, { once: true }); // האזנה חד פעמית
            
            return; // יציאה מהפונקציה
        }
        
        // אחרת, המשך כרגיל
        originalGoToNextStep();
    };
});
// --- הוסף את הקוד הזה בסוף האזור של קוד JavaScript ---

// הגדר משתנה גלובלי לסימון צפייה בסרטון RAM

// פונקציה להצגת כפתור הפעלה ידני
function showPlayButton(videoElement) {
    const videoContainer = videoElement.parentElement;
    videoContainer.style.position = 'relative';
    
    // בדוק אם כבר יש כפתור הפעלה
    if (videoContainer.querySelector('.play-message')) {
        return;
    }
    
    const playMessage = document.createElement('div');
    playMessage.className = 'play-message';
    playMessage.textContent = 'לחץ כאן להפעלת הסרטון';
    playMessage.style.position = 'absolute';
    playMessage.style.top = '50%';
    playMessage.style.left = '50%';
    playMessage.style.transform = 'translate(-50%, -50%)';
    playMessage.style.background = 'rgba(0,0,0,0.7)';
    playMessage.style.color = 'white';
    playMessage.style.padding = '10px 20px';
    playMessage.style.borderRadius = '5px';
    playMessage.style.cursor = 'pointer';
    playMessage.style.zIndex = '1000';
    
    playMessage.addEventListener('click', () => {
        videoElement.muted = false;
        videoElement.play();
        playMessage.remove();
    });
    
    videoContainer.appendChild(playMessage);
}

// דריסת פונקציות המעבר בין שלבים למען תמיכה נכונה בסרטון ה-RAM

// דריסת פונקציית goToNextStep
// נסה למנוע את הכפילויות בדריסת פונקציות

// משתנה לציון אם המעבר לשלב 2 בא מהסרטון השני
let comingFromSecondVideo = false;

// דריסת הפונקציות המקוריות
const originalNextVideoHandler = secondVideo ? secondVideo.onended : null;

// דריסת פונקציית goToNextStep
const originalGoToNextStep = goToNextStep; // שמירת הפונקציה המקורית

// הגדרה חדשה לפונקצית המעבר
window.goToNextStep = function(fromVideo = false) {
    console.log("Current step:", currentStep, "fromVideo:", fromVideo);
    
    // אם בשלב 2 (כרטיס מסך) ולוחצים הבא באופן ידני (לא מהסרטון השני)
// כשלוחצים על כפתור "הבא" בשלב 2 (הדגמת כרטיס מסך)
if (currentStep === 2) {
    currentStep++;
    updateSteps();
    updateButtons();
    
    // טיפול בסרטון RAM
    const ramVideo = document.getElementById('ram-video');
    if (ramVideo && !ramVideoWatched) {
        // הסתר כפתור הבא עד שהסרטון יסתיים
        nextBtn.style.display = 'none';
        
        // נסה להפעיל את הסרטון אוטומטית
        ramVideo.currentTime = 0; // וודא שהסרטון מתחיל מההתחלה
        ramVideo.muted = true; // השתק זמנית כדי לאפשר autoplay
        
        ramVideo.play()
            .then(() => {
                // בטל השתקה אחרי חצי שניה
                setTimeout(() => {
                    ramVideo.muted = false;
                }, 500);
            })
            .catch(err => {
                console.log('RAM video autoplay prevented:', err);
                // הצג כפתור הפעלה ידני
                showPlayButton(ramVideo);
            });
            
        // הוסף מאזין לסיום הסרטון (חד פעמי)
        ramVideo.addEventListener('ended', function() {
            ramVideoWatched = true;
            nextBtn.style.display = 'block';
        }, { once: true });
    }
    return;
}
    
    // אם בשלב 3 (סרטון RAM) ומנסים להתקדם
    if (currentStep === 3) {
        // בדוק אם הסרטון נצפה עד הסוף
        if (!ramVideoWatched) {
            alert('יש לצפות בסרטון עד סופו לפני שממשיכים');
            return;
        }
        // אם כן, התקדם לשלב הבא
        currentStep++;
        updateSteps();
        updateButtons();
        return;
    }
    
    // טיפול בשאר השלבים עם הפונקציה המקורית
    originalGoToNextStep();
};

// דריסת פונקציית goToPrevStep
const originalGoToPrevStep = goToPrevStep; // שמירת הפונקציה המקורית
window.goToPrevStep = function() {
    if (currentStep > 1) {
        currentStep--;
        updateSteps();
        updateButtons();
        
        // אם חזרנו לשלב הסרטון של RAM
        if (currentStep === 3) {
            const ramVideo = document.getElementById('ram-video');
            // אפס את הסרטון ותן למשתמש להפעיל שוב
            if (ramVideo) {
                ramVideo.currentTime = 0;
                ramVideoWatched = false;
                
                // עדכן את כפתור "הבא"
                if (!ramVideoWatched) {
                    nextBtn.style.display = 'none';
                }
            }
        }
        if (currentStep === 5) {
    const processorVideo = document.getElementById('processor-video');
    if (processorVideo) {
        processorVideo.currentTime = 0;
        processorVideoWatched = false;
        
        // עדכן את כפתור "הבא"
        if (!processorVideoWatched) {
            nextBtn.style.display = 'none';
        }
    }
}
    }
};

// דריסת פונקציית updateButtons
const originalUpdateButtons = updateButtons; // שמירת הפונקציה המקורית
window.updateButtons = function() {
    originalUpdateButtons(); // קריאה לפונקציה המקורית
    
    // התאמות לסרטון RAM
    if (currentStep === 3 && !ramVideoWatched) {
        nextBtn.style.display = 'none';
    }
};

// הוסף מאזינים לסרטון ה-RAM
document.addEventListener('DOMContentLoaded', function() {
    const ramVideo = document.getElementById('ram-video');
    if (ramVideo) {
        ramVideo.addEventListener('ended', function() {
            console.log("RAM video ended");
            ramVideoWatched = true;
            nextBtn.style.display = 'block';
        });
    }
});
// פתרון בעיות סרטון RAM
document.addEventListener('DOMContentLoaded', function() {
    console.log("פותר בעיות RAM");
    
    // הוסף מאזין ספציפי לסרטון ה-RAM
    const ramVideo = document.getElementById('ram-video');
    if (ramVideo) {
        ramVideo.addEventListener('ended', function() {
            console.log("RAM video ended");
            ramVideoWatched = true;
            nextBtn.style.display = 'block';
        });
        
        // הוסף בדיקה מיוחדת למעבר לשלב הסרטון
        const checkRamVideoStep = function() {
            console.log("בודק אם בשלב הסרטון", currentStep);
            if (currentStep === 3 && !ramVideoWatched) {
                console.log("החלפת שלב לסרטון RAM");
                
                // הסתר את כפתור "הבא"
                nextBtn.style.display = 'none';
                
                // הפעל את הסרטון
                ramVideo.currentTime = 0;
                ramVideo.muted = true;
                
                // נסה להפעיל
                setTimeout(() => {
                    ramVideo.play()
                    .then(() => {
                        // הצלחה
                        setTimeout(() => {
                            ramVideo.muted = false;
                        }, 500);
                    })
                    .catch(err => {
                        console.log("שגיאת הפעלה:", err);
                        showPlayButton(ramVideo);
                    });
                }, 300);
            }
        };
        
        // הוסף מאזין לאירוע שינוי שלבים מותאם
        const originalUpdateSteps = window.updateSteps;
        window.updateSteps = function() {
            originalUpdateSteps.apply(this, arguments);
            checkRamVideoStep();
        };
    }
    const processorVideo = document.getElementById('processor-video');
    if (processorVideo) {
        processorVideo.addEventListener('ended', function() {
            processorVideoWatched = true;
            nextBtn.style.display = 'block';
        });
    }
});
    </script>